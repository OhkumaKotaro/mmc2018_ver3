ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"control.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	__aeabi_f2d
  18              		.global	__aeabi_dmul
  19              		.global	__aeabi_dadd
  20              		.global	__aeabi_d2f
  21              		.section	.text.PID_value,"ax",%progbits
  22              		.align	1
  23              		.global	PID_value
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  27              		.fpu fpv4-sp-d16
  29              	PID_value:
  30              	.LFB126:
  31              		.file 1 "Src/control.c"
   1:Src/control.c **** #include "control.h"
   2:Src/control.c **** #include "tim.h"
   3:Src/control.c **** #include "stdint.h"
   4:Src/control.c **** #include "filter.h"
   5:Src/control.c **** #include "spi.h"
   6:Src/control.c **** 
   7:Src/control.c **** #define TRUE 1
   8:Src/control.c **** #define FALSE 0
   9:Src/control.c **** 
  10:Src/control.c **** #define ON 1
  11:Src/control.c **** #define OFF
  12:Src/control.c **** 
  13:Src/control.c **** #define dt 0.001
  14:Src/control.c **** 
  15:Src/control.c **** typedef struct
  16:Src/control.c **** {
  17:Src/control.c ****     int16_t velocity;
  18:Src/control.c ****     int16_t accel;
  19:Src/control.c ****     int8_t dir;
  20:Src/control.c **** } target_t;
  21:Src/control.c **** target_t straight_tgt;
  22:Src/control.c **** target_t yawrate_tgt;
  23:Src/control.c **** 
  24:Src/control.c **** typedef struct
  25:Src/control.c **** {
  26:Src/control.c ****     uint16_t up;
  27:Src/control.c ****     uint16_t cons;
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 2


  28:Src/control.c ****     uint16_t down;
  29:Src/control.c **** } trapezoid_tim_t;
  30:Src/control.c **** trapezoid_tim_t straight_tim;
  31:Src/control.c **** trapezoid_tim_t yawrate_tim;
  32:Src/control.c **** 
  33:Src/control.c **** extern enc_t enc;
  34:Src/control.c **** extern gyro_t gyro;
  35:Src/control.c **** 
  36:Src/control.c **** extern sensor_t sen_l;
  37:Src/control.c **** extern sensor_t sen_front;
  38:Src/control.c **** extern sensor_t sen_r;
  39:Src/control.c **** 
  40:Src/control.c **** float enc_sum;
  41:Src/control.c **** float enc_before = 0;
  42:Src/control.c **** 
  43:Src/control.c **** float y_sum;
  44:Src/control.c **** float y_before = 0;
  45:Src/control.c **** 
  46:Src/control.c **** float si_wall_sum;
  47:Src/control.c **** float si_wall_bef;
  48:Src/control.c **** 
  49:Src/control.c **** float front_wall_sum = 0;
  50:Src/control.c **** float front_wall_before = 0;
  51:Src/control.c **** 
  52:Src/control.c **** volatile unsigned char flag_motion_end;
  53:Src/control.c **** uint8_t flag_motor;
  54:Src/control.c **** unsigned char flag_wall;
  55:Src/control.c **** 
  56:Src/control.c **** /****************************************************************************************
  57:Src/control.c ****  * outline  : PID control
  58:Src/control.c ****  * argument : 
  59:Src/control.c ****  * return   : control value
  60:Src/control.c **** ********************************************************************************************/
  61:Src/control.c **** float PID_value(float target, float measured, float *sum, float *old, float Kp, float Ki, float Kd)
  62:Src/control.c **** {
  32              		.loc 1 62 0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 0
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36              	.LVL0:
  37 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 24
  40              		.cfi_offset 3, -24
  41              		.cfi_offset 4, -20
  42              		.cfi_offset 5, -16
  43              		.cfi_offset 6, -12
  44              		.cfi_offset 7, -8
  45              		.cfi_offset 14, -4
  46 0002 2DED048B 		vpush.64	{d8, d9}
  47              	.LCFI1:
  48              		.cfi_def_cfa_offset 40
  49              		.cfi_offset 80, -40
  50              		.cfi_offset 81, -36
  51              		.cfi_offset 82, -32
  52              		.cfi_offset 83, -28
  53 0006 0546     		mov	r5, r0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 3


  54 0008 0C46     		mov	r4, r1
  55 000a F0EE619A 		vmov.f32	s19, s3
  56 000e B0EE429A 		vmov.f32	s18, s4
  63:Src/control.c ****     float error;
  64:Src/control.c ****     float p, i, d;
  65:Src/control.c **** 
  66:Src/control.c ****     error = target - measured;
  57              		.loc 1 66 0
  58 0012 30EE608A 		vsub.f32	s16, s0, s1
  59              	.LVL1:
  67:Src/control.c ****     p = Kp * error;
  60              		.loc 1 67 0
  61 0016 68EE018A 		vmul.f32	s17, s16, s2
  62              	.LVL2:
  68:Src/control.c **** 
  69:Src/control.c ****     *sum += error * dt;
  63              		.loc 1 69 0
  64 001a 18EE100A 		vmov	r0, s16
  65              	.LVL3:
  66 001e FFF7FEFF 		bl	__aeabi_f2d
  67              	.LVL4:
  68 0022 13A3     		adr	r3, .L3
  69 0024 D3E90023 		ldrd	r2, [r3]
  70 0028 FFF7FEFF 		bl	__aeabi_dmul
  71              	.LVL5:
  72 002c 0646     		mov	r6, r0
  73 002e 0F46     		mov	r7, r1
  74 0030 2868     		ldr	r0, [r5]	@ float
  75 0032 FFF7FEFF 		bl	__aeabi_f2d
  76              	.LVL6:
  77 0036 3246     		mov	r2, r6
  78 0038 3B46     		mov	r3, r7
  79 003a FFF7FEFF 		bl	__aeabi_dadd
  80              	.LVL7:
  81 003e FFF7FEFF 		bl	__aeabi_d2f
  82              	.LVL8:
  83 0042 00EE100A 		vmov	s0, r0
  84 0046 2860     		str	r0, [r5]	@ float
  70:Src/control.c ****     i = *sum * Ki;
  85              		.loc 1 70 0
  86 0048 20EE290A 		vmul.f32	s0, s0, s19
  87              	.LVL9:
  71:Src/control.c **** 
  72:Src/control.c ****     d = Kd * (error - *old);
  88              		.loc 1 72 0
  89 004c 94ED002A 		vldr.32	s4, [r4]
  90 0050 38EE422A 		vsub.f32	s4, s16, s4
  91 0054 22EE092A 		vmul.f32	s4, s4, s18
  92              	.LVL10:
  73:Src/control.c ****     *old = error;
  93              		.loc 1 73 0
  94 0058 84ED008A 		vstr.32	s16, [r4]
  74:Src/control.c **** 
  75:Src/control.c ****     return (p + i + d);
  95              		.loc 1 75 0
  96 005c 38EE800A 		vadd.f32	s0, s17, s0
  97              	.LVL11:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 4


  76:Src/control.c **** }
  98              		.loc 1 76 0
  99 0060 30EE020A 		vadd.f32	s0, s0, s4
 100 0064 BDEC048B 		vldm	sp!, {d8-d9}
 101              	.LCFI2:
 102              		.cfi_restore 82
 103              		.cfi_restore 83
 104              		.cfi_restore 80
 105              		.cfi_restore 81
 106              		.cfi_def_cfa_offset 24
 107              	.LVL12:
 108 0068 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 109              	.LVL13:
 110              	.L4:
 111 006a 00BFAFF3 		.align	3
 111      0080
 112              	.L3:
 113 0070 FCA9F1D2 		.word	-755914244
 114 0074 4D62503F 		.word	1062232653
 115              		.cfi_endproc
 116              	.LFE126:
 118              		.section	.text.Straight_Calc_fb,"ax",%progbits
 119              		.align	1
 120              		.global	Straight_Calc_fb
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 124              		.fpu fpv4-sp-d16
 126              	Straight_Calc_fb:
 127              	.LFB127:
  77:Src/control.c **** 
  78:Src/control.c **** /****************************************************************************************
  79:Src/control.c ****  * outline  : calcurate accele distance
  80:Src/control.c ****  * argument : distance[mm],v_start[mm/s],v_end[mm/s]
  81:Src/control.c ****  * return   : void
  82:Src/control.c **** ********************************************************************************************/
  83:Src/control.c **** void Straight_Calc_fb(int16_t distant, int16_t v_start, int16_t v_end, uint16_t v_max, uint16_t acc
  84:Src/control.c **** {
 128              		.loc 1 84 0
 129              		.cfi_startproc
 130              		@ args = 4, pretend = 0, frame = 0
 131              		@ frame_needed = 0, uses_anonymous_args = 0
 132              		@ link register save eliminated.
 133              	.LVL14:
 134 0000 70B4     		push	{r4, r5, r6}
 135              	.LCFI3:
 136              		.cfi_def_cfa_offset 12
 137              		.cfi_offset 4, -12
 138              		.cfi_offset 5, -8
 139              		.cfi_offset 6, -4
 140 0002 BDF80C40 		ldrh	r4, [sp, #12]
  85:Src/control.c ****     float t1, t2, t3;
  86:Src/control.c ****     float constant_L;
  87:Src/control.c **** 
  88:Src/control.c ****     enc_before = 0;
 141              		.loc 1 88 0
 142 0006 0025     		movs	r5, #0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 5


 143 0008 354E     		ldr	r6, .L12
 144 000a 3560     		str	r5, [r6]	@ float
  89:Src/control.c ****     y_before = 0;
 145              		.loc 1 89 0
 146 000c 354E     		ldr	r6, .L12+4
 147 000e 3560     		str	r5, [r6]	@ float
  90:Src/control.c **** 
  91:Src/control.c ****     straight_tgt.velocity = v_start;
 148              		.loc 1 91 0
 149 0010 354D     		ldr	r5, .L12+8
 150 0012 2980     		strh	r1, [r5]	@ movhi
  92:Src/control.c ****     straight_tgt.accel = accel;
 151              		.loc 1 92 0
 152 0014 6C80     		strh	r4, [r5, #2]	@ movhi
  93:Src/control.c **** 
  94:Src/control.c ****     if (distant < 0)
 153              		.loc 1 94 0
 154 0016 0028     		cmp	r0, #0
 155              	.LVL15:
 156 0018 07DB     		blt	.L10
  95:Src/control.c ****     {
  96:Src/control.c ****         distant = -1 * distant;
  97:Src/control.c ****         straight_tgt.dir = -1;
  98:Src/control.c ****     }
  99:Src/control.c ****     else if (distant == 0)
 157              		.loc 1 99 0
 158 001a 0028     		cmp	r0, #0
 159 001c 5AD0     		beq	.L11
 100:Src/control.c ****     {
 101:Src/control.c ****         straight_tgt.dir = 0;
 102:Src/control.c ****         accel = 1;
 103:Src/control.c ****         v_max = 1;
 104:Src/control.c ****     }
 105:Src/control.c ****     else if (distant > 0)
 160              		.loc 1 105 0
 161 001e 0028     		cmp	r0, #0
 162 0020 07DD     		ble	.L7
 106:Src/control.c ****     {
 107:Src/control.c ****         straight_tgt.dir = 1;
 163              		.loc 1 107 0
 164 0022 314D     		ldr	r5, .L12+8
 165 0024 0126     		movs	r6, #1
 166 0026 2E71     		strb	r6, [r5, #4]
 167 0028 03E0     		b	.L7
 168              	.L10:
  96:Src/control.c ****         straight_tgt.dir = -1;
 169              		.loc 1 96 0
 170 002a 4042     		negs	r0, r0
 171 002c 00B2     		sxth	r0, r0
 172              	.LVL16:
  97:Src/control.c ****     }
 173              		.loc 1 97 0
 174 002e FF26     		movs	r6, #255
 175 0030 2E71     		strb	r6, [r5, #4]
 176              	.LVL17:
 177              	.L7:
 108:Src/control.c ****     }
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 6


 109:Src/control.c **** 
 110:Src/control.c ****     t1 = (float)(v_max - v_start) / accel;
 178              		.loc 1 110 0
 179 0032 5D1A     		subs	r5, r3, r1
 180 0034 07EE105A 		vmov	s14, r5	@ int
 181 0038 B8EEC77A 		vcvt.f32.s32	s14, s14
 182 003c 07EE904A 		vmov	s15, r4	@ int
 183 0040 F8EEE77A 		vcvt.f32.s32	s15, s15
 184 0044 87EE276A 		vdiv.f32	s12, s14, s15
 185              	.LVL18:
 111:Src/control.c ****     t3 = (float)(v_max - v_end) / accel;
 186              		.loc 1 111 0
 187 0048 9C1A     		subs	r4, r3, r2
 188              	.LVL19:
 189 004a 07EE104A 		vmov	s14, r4	@ int
 190 004e B8EEC77A 		vcvt.f32.s32	s14, s14
 191 0052 C7EE276A 		vdiv.f32	s13, s14, s15
 192              	.LVL20:
 112:Src/control.c **** 
 113:Src/control.c ****     constant_L = (float)distant - (v_max + v_start) * t1 / 2 - (v_max + v_end) * t3 / 2;
 193              		.loc 1 113 0
 194 0056 07EE900A 		vmov	s15, r0	@ int
 195 005a B8EEE77A 		vcvt.f32.s32	s14, s15
 196 005e 5918     		adds	r1, r3, r1
 197              	.LVL21:
 198 0060 07EE901A 		vmov	s15, r1	@ int
 199 0064 F8EEE77A 		vcvt.f32.s32	s15, s15
 200 0068 67EE867A 		vmul.f32	s15, s15, s12
 201 006c F6EE005A 		vmov.f32	s11, #5.0e-1
 202 0070 67EEA57A 		vmul.f32	s15, s15, s11
 203 0074 77EE677A 		vsub.f32	s15, s14, s15
 204 0078 9A18     		adds	r2, r3, r2
 205              	.LVL22:
 206 007a 07EE102A 		vmov	s14, r2	@ int
 207 007e B8EEC77A 		vcvt.f32.s32	s14, s14
 208 0082 27EE267A 		vmul.f32	s14, s14, s13
 209 0086 27EE257A 		vmul.f32	s14, s14, s11
 210 008a 37EEC77A 		vsub.f32	s14, s15, s14
 211              	.LVL23:
 114:Src/control.c **** 
 115:Src/control.c ****     t2 = constant_L / v_max;
 212              		.loc 1 115 0
 213 008e 07EE903A 		vmov	s15, r3	@ int
 214 0092 F8EEE77A 		vcvt.f32.s32	s15, s15
 215 0096 C7EE275A 		vdiv.f32	s11, s14, s15
 216              	.LVL24:
 116:Src/control.c **** 
 117:Src/control.c ****     t1 *= 1000;
 217              		.loc 1 117 0
 218 009a 9FED147A 		vldr.32	s14, .L12+12
 219              	.LVL25:
 220 009e 26EE076A 		vmul.f32	s12, s12, s14
 221              	.LVL26:
 118:Src/control.c ****     t2 *= 1000;
 222              		.loc 1 118 0
 223 00a2 65EE877A 		vmul.f32	s15, s11, s14
 224              	.LVL27:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 7


 119:Src/control.c ****     t3 *= 1000;
 225              		.loc 1 119 0
 226 00a6 66EE876A 		vmul.f32	s13, s13, s14
 227              	.LVL28:
 120:Src/control.c **** 
 121:Src/control.c ****     straight_tim.up = t1;
 228              		.loc 1 121 0
 229 00aa 114B     		ldr	r3, .L12+16
 230              	.LVL29:
 231 00ac BCEEC66A 		vcvt.u32.f32	s12, s12
 232              	.LVL30:
 233 00b0 16EE102A 		vmov	r2, s12	@ int
 234 00b4 1A80     		strh	r2, [r3]	@ movhi
 122:Src/control.c ****     straight_tim.cons = t2;
 235              		.loc 1 122 0
 236 00b6 FCEEE77A 		vcvt.u32.f32	s15, s15
 237              	.LVL31:
 238 00ba 17EE902A 		vmov	r2, s15	@ int
 239 00be 5A80     		strh	r2, [r3, #2]	@ movhi
 123:Src/control.c ****     straight_tim.down = t3;
 240              		.loc 1 123 0
 241 00c0 FCEEE66A 		vcvt.u32.f32	s13, s13
 242              	.LVL32:
 243 00c4 16EE902A 		vmov	r2, s13	@ int
 244 00c8 9A80     		strh	r2, [r3, #4]	@ movhi
 124:Src/control.c **** 
 125:Src/control.c ****     flag_motion_end = FALSE;
 245              		.loc 1 125 0
 246 00ca 0A4B     		ldr	r3, .L12+20
 247 00cc 0022     		movs	r2, #0
 248 00ce 1A70     		strb	r2, [r3]
 126:Src/control.c **** 
 127:Src/control.c ****     //printf("%d %d %d\r\n",accel_T,constant_T,decrease_T);
 128:Src/control.c **** }
 249              		.loc 1 128 0
 250 00d0 70BC     		pop	{r4, r5, r6}
 251              	.LCFI4:
 252              		.cfi_remember_state
 253              		.cfi_restore 6
 254              		.cfi_restore 5
 255              		.cfi_restore 4
 256              		.cfi_def_cfa_offset 0
 257 00d2 7047     		bx	lr
 258              	.LVL33:
 259              	.L11:
 260              	.LCFI5:
 261              		.cfi_restore_state
 101:Src/control.c ****         accel = 1;
 262              		.loc 1 101 0
 263 00d4 044B     		ldr	r3, .L12+8
 264              	.LVL34:
 265 00d6 0024     		movs	r4, #0
 266 00d8 1C71     		strb	r4, [r3, #4]
 267              	.LVL35:
 102:Src/control.c ****         v_max = 1;
 268              		.loc 1 102 0
 269 00da 0124     		movs	r4, #1
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 8


 103:Src/control.c ****     }
 270              		.loc 1 103 0
 271 00dc 2346     		mov	r3, r4
 272 00de A8E7     		b	.L7
 273              	.L13:
 274              		.align	2
 275              	.L12:
 276 00e0 00000000 		.word	.LANCHOR0
 277 00e4 00000000 		.word	.LANCHOR1
 278 00e8 00000000 		.word	straight_tgt
 279 00ec 00007A44 		.word	1148846080
 280 00f0 00000000 		.word	straight_tim
 281 00f4 00000000 		.word	flag_motion_end
 282              		.cfi_endproc
 283              	.LFE127:
 285              		.section	.text.Yawrate_Calc_fb,"ax",%progbits
 286              		.align	1
 287              		.global	Yawrate_Calc_fb
 288              		.syntax unified
 289              		.thumb
 290              		.thumb_func
 291              		.fpu fpv4-sp-d16
 293              	Yawrate_Calc_fb:
 294              	.LFB128:
 129:Src/control.c **** 
 130:Src/control.c **** /****************************************************************************************
 131:Src/control.c ****  * outline  : calcurate trapezoid accel
 132:Src/control.c ****  * argument : degree[degree],v_start[degree/s],v_end[degree/s]
 133:Src/control.c ****  * return   : void
 134:Src/control.c **** ********************************************************************************************/
 135:Src/control.c **** void Yawrate_Calc_fb(int16_t degree, int16_t v_start, int16_t v_end, int16_t v_max, int16_t accel)
 136:Src/control.c **** {
 295              		.loc 1 136 0
 296              		.cfi_startproc
 297              		@ args = 4, pretend = 0, frame = 0
 298              		@ frame_needed = 0, uses_anonymous_args = 0
 299              		@ link register save eliminated.
 300              	.LVL36:
 301 0000 70B4     		push	{r4, r5, r6}
 302              	.LCFI6:
 303              		.cfi_def_cfa_offset 12
 304              		.cfi_offset 4, -12
 305              		.cfi_offset 5, -8
 306              		.cfi_offset 6, -4
 307 0002 BDF90C40 		ldrsh	r4, [sp, #12]
 308              	.LVL37:
 137:Src/control.c ****     float t1 = 0, t2 = 0, t3 = 0;
 138:Src/control.c ****     float constant_L;
 139:Src/control.c **** 
 140:Src/control.c ****     enc_before = 0;
 309              		.loc 1 140 0
 310 0006 0025     		movs	r5, #0
 311 0008 354E     		ldr	r6, .L21
 312 000a 3560     		str	r5, [r6]	@ float
 141:Src/control.c ****     y_before = 0;
 313              		.loc 1 141 0
 314 000c 354E     		ldr	r6, .L21+4
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 9


 315 000e 3560     		str	r5, [r6]	@ float
 142:Src/control.c **** 
 143:Src/control.c ****     yawrate_tgt.velocity = v_start;
 316              		.loc 1 143 0
 317 0010 354D     		ldr	r5, .L21+8
 318 0012 2980     		strh	r1, [r5]	@ movhi
 144:Src/control.c ****     yawrate_tgt.accel = accel;
 319              		.loc 1 144 0
 320 0014 6C80     		strh	r4, [r5, #2]	@ movhi
 145:Src/control.c **** 
 146:Src/control.c ****     if (degree < 0)
 321              		.loc 1 146 0
 322 0016 0028     		cmp	r0, #0
 323              	.LVL38:
 324 0018 07DB     		blt	.L19
 147:Src/control.c ****     {
 148:Src/control.c ****         degree = -1 * degree;
 149:Src/control.c ****         yawrate_tgt.dir = -1;
 150:Src/control.c ****     }
 151:Src/control.c ****     else if (degree == 0)
 325              		.loc 1 151 0
 326 001a 0028     		cmp	r0, #0
 327 001c 5AD0     		beq	.L20
 152:Src/control.c ****     {
 153:Src/control.c ****         yawrate_tgt.dir = 0;
 154:Src/control.c ****         accel = 1;
 155:Src/control.c ****         v_max = 1;
 156:Src/control.c ****     }
 157:Src/control.c ****     else if (degree > 0)
 328              		.loc 1 157 0
 329 001e 0028     		cmp	r0, #0
 330 0020 07DD     		ble	.L16
 158:Src/control.c ****     {
 159:Src/control.c ****         yawrate_tgt.dir = 1;
 331              		.loc 1 159 0
 332 0022 314D     		ldr	r5, .L21+8
 333 0024 0126     		movs	r6, #1
 334 0026 2E71     		strb	r6, [r5, #4]
 335 0028 03E0     		b	.L16
 336              	.L19:
 148:Src/control.c ****         yawrate_tgt.dir = -1;
 337              		.loc 1 148 0
 338 002a 4042     		negs	r0, r0
 339 002c 00B2     		sxth	r0, r0
 340              	.LVL39:
 149:Src/control.c ****     }
 341              		.loc 1 149 0
 342 002e FF26     		movs	r6, #255
 343 0030 2E71     		strb	r6, [r5, #4]
 344              	.LVL40:
 345              	.L16:
 160:Src/control.c ****     }
 161:Src/control.c **** 
 162:Src/control.c ****     t1 = (float)(v_max - v_start) / accel;
 346              		.loc 1 162 0
 347 0032 5D1A     		subs	r5, r3, r1
 348 0034 07EE105A 		vmov	s14, r5	@ int
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 10


 349 0038 B8EEC77A 		vcvt.f32.s32	s14, s14
 350 003c 07EE904A 		vmov	s15, r4	@ int
 351 0040 F8EEE77A 		vcvt.f32.s32	s15, s15
 352 0044 87EE276A 		vdiv.f32	s12, s14, s15
 353              	.LVL41:
 163:Src/control.c ****     t3 = (float)(v_max - v_end) / accel;
 354              		.loc 1 163 0
 355 0048 9C1A     		subs	r4, r3, r2
 356              	.LVL42:
 357 004a 07EE104A 		vmov	s14, r4	@ int
 358 004e B8EEC77A 		vcvt.f32.s32	s14, s14
 359 0052 C7EE276A 		vdiv.f32	s13, s14, s15
 360              	.LVL43:
 164:Src/control.c **** 
 165:Src/control.c ****     constant_L = (float)degree - (v_max + v_start) * t1 / 2 - (v_max + v_end) * t3 / 2;
 361              		.loc 1 165 0
 362 0056 07EE900A 		vmov	s15, r0	@ int
 363 005a B8EEE77A 		vcvt.f32.s32	s14, s15
 364 005e 5918     		adds	r1, r3, r1
 365              	.LVL44:
 366 0060 07EE901A 		vmov	s15, r1	@ int
 367 0064 F8EEE77A 		vcvt.f32.s32	s15, s15
 368 0068 67EE867A 		vmul.f32	s15, s15, s12
 369 006c F6EE005A 		vmov.f32	s11, #5.0e-1
 370 0070 67EEA57A 		vmul.f32	s15, s15, s11
 371 0074 77EE677A 		vsub.f32	s15, s14, s15
 372 0078 9A18     		adds	r2, r3, r2
 373              	.LVL45:
 374 007a 07EE102A 		vmov	s14, r2	@ int
 375 007e B8EEC77A 		vcvt.f32.s32	s14, s14
 376 0082 27EE267A 		vmul.f32	s14, s14, s13
 377 0086 27EE257A 		vmul.f32	s14, s14, s11
 378 008a 37EEC77A 		vsub.f32	s14, s15, s14
 379              	.LVL46:
 166:Src/control.c **** 
 167:Src/control.c ****     t2 = constant_L / v_max;
 380              		.loc 1 167 0
 381 008e 07EE903A 		vmov	s15, r3	@ int
 382 0092 F8EEE77A 		vcvt.f32.s32	s15, s15
 383 0096 C7EE275A 		vdiv.f32	s11, s14, s15
 384              	.LVL47:
 168:Src/control.c **** 
 169:Src/control.c ****     t1 *= 1000;
 385              		.loc 1 169 0
 386 009a 9FED147A 		vldr.32	s14, .L21+12
 387              	.LVL48:
 388 009e 26EE076A 		vmul.f32	s12, s12, s14
 389              	.LVL49:
 170:Src/control.c ****     t2 *= 1000;
 390              		.loc 1 170 0
 391 00a2 65EE877A 		vmul.f32	s15, s11, s14
 392              	.LVL50:
 171:Src/control.c ****     t3 *= 1000;
 393              		.loc 1 171 0
 394 00a6 66EE876A 		vmul.f32	s13, s13, s14
 395              	.LVL51:
 172:Src/control.c **** 
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 11


 173:Src/control.c ****     yawrate_tim.up = t1;
 396              		.loc 1 173 0
 397 00aa 114B     		ldr	r3, .L21+16
 398              	.LVL52:
 399 00ac BCEEC66A 		vcvt.u32.f32	s12, s12
 400              	.LVL53:
 401 00b0 16EE102A 		vmov	r2, s12	@ int
 402 00b4 1A80     		strh	r2, [r3]	@ movhi
 174:Src/control.c ****     yawrate_tim.cons = t2;
 403              		.loc 1 174 0
 404 00b6 FCEEE77A 		vcvt.u32.f32	s15, s15
 405              	.LVL54:
 406 00ba 17EE902A 		vmov	r2, s15	@ int
 407 00be 5A80     		strh	r2, [r3, #2]	@ movhi
 175:Src/control.c ****     yawrate_tim.down = t3;
 408              		.loc 1 175 0
 409 00c0 FCEEE66A 		vcvt.u32.f32	s13, s13
 410              	.LVL55:
 411 00c4 16EE902A 		vmov	r2, s13	@ int
 412 00c8 9A80     		strh	r2, [r3, #4]	@ movhi
 176:Src/control.c **** 
 177:Src/control.c ****     flag_motion_end = FALSE;
 413              		.loc 1 177 0
 414 00ca 0A4B     		ldr	r3, .L21+20
 415 00cc 0022     		movs	r2, #0
 416 00ce 1A70     		strb	r2, [r3]
 178:Src/control.c **** }
 417              		.loc 1 178 0
 418 00d0 70BC     		pop	{r4, r5, r6}
 419              	.LCFI7:
 420              		.cfi_remember_state
 421              		.cfi_restore 6
 422              		.cfi_restore 5
 423              		.cfi_restore 4
 424              		.cfi_def_cfa_offset 0
 425 00d2 7047     		bx	lr
 426              	.LVL56:
 427              	.L20:
 428              	.LCFI8:
 429              		.cfi_restore_state
 153:Src/control.c ****         accel = 1;
 430              		.loc 1 153 0
 431 00d4 044B     		ldr	r3, .L21+8
 432              	.LVL57:
 433 00d6 0024     		movs	r4, #0
 434 00d8 1C71     		strb	r4, [r3, #4]
 435              	.LVL58:
 154:Src/control.c ****         v_max = 1;
 436              		.loc 1 154 0
 437 00da 0124     		movs	r4, #1
 155:Src/control.c ****     }
 438              		.loc 1 155 0
 439 00dc 2346     		mov	r3, r4
 440 00de A8E7     		b	.L16
 441              	.L22:
 442              		.align	2
 443              	.L21:
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 12


 444 00e0 00000000 		.word	.LANCHOR0
 445 00e4 00000000 		.word	.LANCHOR1
 446 00e8 00000000 		.word	yawrate_tgt
 447 00ec 00007A44 		.word	1148846080
 448 00f0 00000000 		.word	yawrate_tim
 449 00f4 00000000 		.word	flag_motion_end
 450              		.cfi_endproc
 451              	.LFE128:
 453              		.global	__aeabi_i2d
 454              		.global	__aeabi_d2iz
 455              		.global	__aeabi_dsub
 456              		.section	.text.Control_encoder,"ax",%progbits
 457              		.align	1
 458              		.global	Control_encoder
 459              		.syntax unified
 460              		.thumb
 461              		.thumb_func
 462              		.fpu fpv4-sp-d16
 464              	Control_encoder:
 465              	.LFB129:
 179:Src/control.c **** 
 180:Src/control.c **** /****************************************************************************************
 181:Src/control.c ****  * outline  : output pwm for trapezoid accele straight by feadbuck control
 182:Src/control.c ****  * argument : void
 183:Src/control.c ****  * return   : void
 184:Src/control.c **** ********************************************************************************************/
 185:Src/control.c **** float Control_encoder(void)
 186:Src/control.c **** {
 466              		.loc 1 186 0
 467              		.cfi_startproc
 468              		@ args = 0, pretend = 0, frame = 0
 469              		@ frame_needed = 0, uses_anonymous_args = 0
 470 0000 2DE97043 		push	{r4, r5, r6, r8, r9, lr}
 471              	.LCFI9:
 472              		.cfi_def_cfa_offset 24
 473              		.cfi_offset 4, -24
 474              		.cfi_offset 5, -20
 475              		.cfi_offset 6, -16
 476              		.cfi_offset 8, -12
 477              		.cfi_offset 9, -8
 478              		.cfi_offset 14, -4
 479              	.LVL59:
 187:Src/control.c ****     float target = 0;
 188:Src/control.c ****     if (straight_tgt.dir == 0)
 480              		.loc 1 188 0
 481 0004 364B     		ldr	r3, .L32+8
 482 0006 93F90440 		ldrsb	r4, [r3, #4]
 483 000a 44B3     		cbz	r4, .L24
 189:Src/control.c ****     {
 190:Src/control.c ****     }
 191:Src/control.c ****     else
 192:Src/control.c ****     {
 193:Src/control.c ****         if (straight_tim.up > 0)
 484              		.loc 1 193 0
 485 000c 354B     		ldr	r3, .L32+12
 486 000e 1D88     		ldrh	r5, [r3]
 487 0010 5DB9     		cbnz	r5, .L29
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 13


 194:Src/control.c ****         {
 195:Src/control.c ****             straight_tgt.velocity += straight_tgt.accel * dt;
 196:Src/control.c ****             straight_tim.up--;
 197:Src/control.c ****         }
 198:Src/control.c ****         else if (straight_tim.cons > 0)
 488              		.loc 1 198 0
 489 0012 344B     		ldr	r3, .L32+12
 490 0014 5B88     		ldrh	r3, [r3, #2]
 491 0016 002B     		cmp	r3, #0
 492 0018 3DD1     		bne	.L30
 199:Src/control.c ****         {
 200:Src/control.c ****             straight_tim.cons--;
 201:Src/control.c ****         }
 202:Src/control.c ****         else if (straight_tim.down > 0)
 493              		.loc 1 202 0
 494 001a 324B     		ldr	r3, .L32+12
 495 001c 9D88     		ldrh	r5, [r3, #4]
 496 001e 002D     		cmp	r5, #0
 497 0020 3DD1     		bne	.L31
 203:Src/control.c ****         {
 204:Src/control.c ****             straight_tgt.velocity -= straight_tgt.accel * dt;
 205:Src/control.c ****             straight_tim.down--;
 206:Src/control.c ****         }
 207:Src/control.c ****         else
 208:Src/control.c ****         {
 209:Src/control.c ****             flag_motion_end = TRUE;
 498              		.loc 1 209 0
 499 0022 314B     		ldr	r3, .L32+16
 500 0024 0122     		movs	r2, #1
 501 0026 1A70     		strb	r2, [r3]
 502 0028 19E0     		b	.L24
 503              	.L29:
 195:Src/control.c ****             straight_tim.up--;
 504              		.loc 1 195 0
 505 002a 2D4E     		ldr	r6, .L32+8
 506 002c B6F90200 		ldrsh	r0, [r6, #2]
 507 0030 FFF7FEFF 		bl	__aeabi_i2d
 508              	.LVL60:
 509 0034 28A3     		adr	r3, .L32
 510 0036 D3E90023 		ldrd	r2, [r3]
 511 003a FFF7FEFF 		bl	__aeabi_dmul
 512              	.LVL61:
 513 003e 8046     		mov	r8, r0
 514 0040 8946     		mov	r9, r1
 515 0042 B6F90000 		ldrsh	r0, [r6]
 516 0046 FFF7FEFF 		bl	__aeabi_i2d
 517              	.LVL62:
 518 004a 4246     		mov	r2, r8
 519 004c 4B46     		mov	r3, r9
 520 004e FFF7FEFF 		bl	__aeabi_dadd
 521              	.LVL63:
 522 0052 FFF7FEFF 		bl	__aeabi_d2iz
 523              	.LVL64:
 524 0056 3080     		strh	r0, [r6]	@ movhi
 196:Src/control.c ****         }
 525              		.loc 1 196 0
 526 0058 013D     		subs	r5, r5, #1
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 14


 527 005a 224B     		ldr	r3, .L32+12
 528 005c 1D80     		strh	r5, [r3]	@ movhi
 529              	.L24:
 210:Src/control.c ****         }
 211:Src/control.c ****     }
 212:Src/control.c **** 
 213:Src/control.c ****     target = (float)straight_tgt.dir * straight_tgt.velocity;
 530              		.loc 1 213 0
 531 005e 07EE904A 		vmov	s15, r4	@ int
 532 0062 F8EEE77A 		vcvt.f32.s32	s15, s15
 533 0066 1E4B     		ldr	r3, .L32+8
 534 0068 B3F90030 		ldrsh	r3, [r3]
 535 006c 00EE103A 		vmov	s0, r3	@ int
 536 0070 B8EEC00A 		vcvt.f32.s32	s0, s0
 537              	.LVL65:
 214:Src/control.c **** 
 215:Src/control.c ****     return PID_value(target, enc.velocity, &enc_sum, &enc_before, 4.0f, 10.0f, 0);
 538              		.loc 1 215 0
 539 0074 9FED1D2A 		vldr.32	s4, .L32+20
 540 0078 F2EE041A 		vmov.f32	s3, #1.0e+1
 541 007c B1EE001A 		vmov.f32	s2, #4.0e+0
 542 0080 1B49     		ldr	r1, .L32+24
 543 0082 1C48     		ldr	r0, .L32+28
 544 0084 1C4B     		ldr	r3, .L32+32
 545 0086 D3ED010A 		vldr.32	s1, [r3, #4]
 546 008a 27EE800A 		vmul.f32	s0, s15, s0
 547              	.LVL66:
 548 008e FFF7FEFF 		bl	PID_value
 549              	.LVL67:
 216:Src/control.c **** }
 550              		.loc 1 216 0
 551 0092 BDE87083 		pop	{r4, r5, r6, r8, r9, pc}
 552              	.LVL68:
 553              	.L30:
 200:Src/control.c ****         }
 554              		.loc 1 200 0
 555 0096 013B     		subs	r3, r3, #1
 556 0098 124A     		ldr	r2, .L32+12
 557 009a 5380     		strh	r3, [r2, #2]	@ movhi
 558 009c DFE7     		b	.L24
 559              	.L31:
 204:Src/control.c ****             straight_tim.down--;
 560              		.loc 1 204 0
 561 009e 104E     		ldr	r6, .L32+8
 562 00a0 B6F90200 		ldrsh	r0, [r6, #2]
 563 00a4 FFF7FEFF 		bl	__aeabi_i2d
 564              	.LVL69:
 565 00a8 0BA3     		adr	r3, .L32
 566 00aa D3E90023 		ldrd	r2, [r3]
 567 00ae FFF7FEFF 		bl	__aeabi_dmul
 568              	.LVL70:
 569 00b2 8046     		mov	r8, r0
 570 00b4 8946     		mov	r9, r1
 571 00b6 B6F90000 		ldrsh	r0, [r6]
 572 00ba FFF7FEFF 		bl	__aeabi_i2d
 573              	.LVL71:
 574 00be 4246     		mov	r2, r8
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 15


 575 00c0 4B46     		mov	r3, r9
 576 00c2 FFF7FEFF 		bl	__aeabi_dsub
 577              	.LVL72:
 578 00c6 FFF7FEFF 		bl	__aeabi_d2iz
 579              	.LVL73:
 580 00ca 3080     		strh	r0, [r6]	@ movhi
 205:Src/control.c ****         }
 581              		.loc 1 205 0
 582 00cc 013D     		subs	r5, r5, #1
 583 00ce 054B     		ldr	r3, .L32+12
 584 00d0 9D80     		strh	r5, [r3, #4]	@ movhi
 585 00d2 C4E7     		b	.L24
 586              	.L33:
 587 00d4 AFF30080 		.align	3
 588              	.L32:
 589 00d8 FCA9F1D2 		.word	-755914244
 590 00dc 4D62503F 		.word	1062232653
 591 00e0 00000000 		.word	straight_tgt
 592 00e4 00000000 		.word	straight_tim
 593 00e8 00000000 		.word	flag_motion_end
 594 00ec 00000000 		.word	0
 595 00f0 00000000 		.word	.LANCHOR0
 596 00f4 00000000 		.word	enc_sum
 597 00f8 00000000 		.word	enc
 598              		.cfi_endproc
 599              	.LFE129:
 601              		.section	.text.Control_Side_Wall,"ax",%progbits
 602              		.align	1
 603              		.global	Control_Side_Wall
 604              		.syntax unified
 605              		.thumb
 606              		.thumb_func
 607              		.fpu fpv4-sp-d16
 609              	Control_Side_Wall:
 610              	.LFB130:
 217:Src/control.c **** 
 218:Src/control.c **** float Control_Side_Wall(void)
 219:Src/control.c **** {
 611              		.loc 1 219 0
 612              		.cfi_startproc
 613              		@ args = 0, pretend = 0, frame = 0
 614              		@ frame_needed = 0, uses_anonymous_args = 0
 615              		@ link register save eliminated.
 616              	.LVL74:
 220:Src/control.c ****     float wall_dif = 0;
 221:Src/control.c ****     float kp = 0.15f;
 222:Src/control.c **** 
 223:Src/control.c ****     if (sen_l.is_wall == TRUE && sen_r.is_wall == TRUE)
 617              		.loc 1 223 0
 618 0000 3C4B     		ldr	r3, .L50
 619 0002 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 620 0004 012B     		cmp	r3, #1
 621 0006 14D0     		beq	.L46
 622              	.L35:
 224:Src/control.c ****     {
 225:Src/control.c ****         if (sen_l.diff > -200 && sen_r.diff > -200)
 226:Src/control.c ****         {
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 16


 227:Src/control.c ****             wall_dif = kp * ((sen_l.now - sen_l.reference) - (sen_r.now - sen_r.reference));
 228:Src/control.c ****         }
 229:Src/control.c ****     }
 230:Src/control.c ****     else if (sen_l.is_wall == TRUE)
 623              		.loc 1 230 0
 624 0008 012B     		cmp	r3, #1
 625 000a 38D0     		beq	.L47
 231:Src/control.c ****     {
 232:Src/control.c ****         if (sen_l.diff_1ms > -20)
 233:Src/control.c ****         {
 234:Src/control.c ****             wall_dif = 2 * kp * (sen_l.now - sen_l.reference);
 235:Src/control.c ****         }
 236:Src/control.c ****     }
 237:Src/control.c ****     else if (sen_r.is_wall == TRUE)
 626              		.loc 1 237 0
 627 000c 3A4B     		ldr	r3, .L50+4
 628 000e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 629 0010 012B     		cmp	r3, #1
 630 0012 49D0     		beq	.L48
 238:Src/control.c ****     {
 239:Src/control.c ****         if (sen_r.diff_1ms > -20)
 240:Src/control.c ****         {
 241:Src/control.c ****             wall_dif = -2 * kp * (sen_r.now - sen_r.reference);
 242:Src/control.c ****         }
 243:Src/control.c ****     }
 244:Src/control.c ****     else
 245:Src/control.c ****     {
 246:Src/control.c ****         wall_dif = 0;
 631              		.loc 1 246 0
 632 0014 9FED390A 		vldr.32	s0, .L50+8
 633              	.LVL75:
 634              	.L36:
 247:Src/control.c ****     }
 248:Src/control.c **** 
 249:Src/control.c ****     if(yawrate_tgt.dir!=0 || straight_tgt.velocity==0){
 635              		.loc 1 249 0
 636 0018 394B     		ldr	r3, .L50+12
 637 001a 93F90430 		ldrsb	r3, [r3, #4]
 638 001e 002B     		cmp	r3, #0
 639 0020 64D1     		bne	.L44
 640              		.loc 1 249 0 is_stmt 0 discriminator 1
 641 0022 384B     		ldr	r3, .L50+16
 642 0024 B3F90030 		ldrsh	r3, [r3]
 643 0028 002B     		cmp	r3, #0
 644 002a 5ED1     		bne	.L49
 250:Src/control.c ****         wall_dif = 0;
 645              		.loc 1 250 0 is_stmt 1
 646 002c 9FED330A 		vldr.32	s0, .L50+8
 647              	.LVL76:
 251:Src/control.c ****     }
 252:Src/control.c **** 
 253:Src/control.c ****     return wall_dif;
 254:Src/control.c **** }
 648              		.loc 1 254 0
 649 0030 7047     		bx	lr
 650              	.L46:
 223:Src/control.c ****     {
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 17


 651              		.loc 1 223 0 discriminator 1
 652 0032 314A     		ldr	r2, .L50+4
 653 0034 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 654 0036 012A     		cmp	r2, #1
 655 0038 E6D1     		bne	.L35
 225:Src/control.c ****         {
 656              		.loc 1 225 0
 657 003a 2E4B     		ldr	r3, .L50
 658 003c B3F90830 		ldrsh	r3, [r3, #8]
 659 0040 13F1C70F 		cmn	r3, #199
 660 0044 45DB     		blt	.L39
 225:Src/control.c ****         {
 661              		.loc 1 225 0 is_stmt 0 discriminator 1
 662 0046 2C4B     		ldr	r3, .L50+4
 663 0048 B3F90830 		ldrsh	r3, [r3, #8]
 664 004c 13F1C70F 		cmn	r3, #199
 665 0050 42DB     		blt	.L40
 227:Src/control.c ****         }
 666              		.loc 1 227 0 is_stmt 1
 667 0052 284A     		ldr	r2, .L50
 668 0054 B2F90030 		ldrsh	r3, [r2]
 669 0058 B2F90420 		ldrsh	r2, [r2, #4]
 670 005c 9B1A     		subs	r3, r3, r2
 671 005e 2649     		ldr	r1, .L50+4
 672 0060 B1F90020 		ldrsh	r2, [r1]
 673 0064 B1F90410 		ldrsh	r1, [r1, #4]
 674 0068 521A     		subs	r2, r2, r1
 675 006a 9B1A     		subs	r3, r3, r2
 676 006c 00EE103A 		vmov	s0, r3	@ int
 677 0070 B8EEC00A 		vcvt.f32.s32	s0, s0
 678 0074 DFED247A 		vldr.32	s15, .L50+20
 679 0078 20EE270A 		vmul.f32	s0, s0, s15
 680              	.LVL77:
 681 007c CCE7     		b	.L36
 682              	.LVL78:
 683              	.L47:
 232:Src/control.c ****         {
 684              		.loc 1 232 0
 685 007e 1D4B     		ldr	r3, .L50
 686 0080 B3F90A30 		ldrsh	r3, [r3, #10]
 687 0084 13F1130F 		cmn	r3, #19
 688 0088 29DB     		blt	.L41
 234:Src/control.c ****         }
 689              		.loc 1 234 0
 690 008a 1A4A     		ldr	r2, .L50
 691 008c B2F90030 		ldrsh	r3, [r2]
 692 0090 B2F90420 		ldrsh	r2, [r2, #4]
 693 0094 9B1A     		subs	r3, r3, r2
 694 0096 00EE103A 		vmov	s0, r3	@ int
 695 009a B8EEC00A 		vcvt.f32.s32	s0, s0
 696 009e DFED1B7A 		vldr.32	s15, .L50+24
 697 00a2 20EE270A 		vmul.f32	s0, s0, s15
 698              	.LVL79:
 699 00a6 B7E7     		b	.L36
 700              	.LVL80:
 701              	.L48:
 239:Src/control.c ****         {
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 18


 702              		.loc 1 239 0
 703 00a8 134B     		ldr	r3, .L50+4
 704 00aa B3F90A30 		ldrsh	r3, [r3, #10]
 705 00ae 13F1130F 		cmn	r3, #19
 706 00b2 17DB     		blt	.L43
 241:Src/control.c ****         }
 707              		.loc 1 241 0
 708 00b4 104A     		ldr	r2, .L50+4
 709 00b6 B2F90030 		ldrsh	r3, [r2]
 710 00ba B2F90420 		ldrsh	r2, [r2, #4]
 711 00be 9B1A     		subs	r3, r3, r2
 712 00c0 00EE103A 		vmov	s0, r3	@ int
 713 00c4 B8EEC00A 		vcvt.f32.s32	s0, s0
 714 00c8 DFED117A 		vldr.32	s15, .L50+28
 715 00cc 20EE270A 		vmul.f32	s0, s0, s15
 716              	.LVL81:
 717 00d0 A2E7     		b	.L36
 718              	.LVL82:
 719              	.L39:
 220:Src/control.c ****     float kp = 0.15f;
 720              		.loc 1 220 0
 721 00d2 9FED0A0A 		vldr.32	s0, .L50+8
 722 00d6 9FE7     		b	.L36
 723              	.L40:
 724 00d8 9FED080A 		vldr.32	s0, .L50+8
 725 00dc 9CE7     		b	.L36
 726              	.L41:
 727 00de 9FED070A 		vldr.32	s0, .L50+8
 728 00e2 99E7     		b	.L36
 729              	.L43:
 730 00e4 9FED050A 		vldr.32	s0, .L50+8
 731 00e8 96E7     		b	.L36
 732              	.LVL83:
 733              	.L49:
 734 00ea 7047     		bx	lr
 735              	.L44:
 250:Src/control.c ****     }
 736              		.loc 1 250 0
 737 00ec 9FED030A 		vldr.32	s0, .L50+8
 738              	.LVL84:
 739 00f0 7047     		bx	lr
 740              	.L51:
 741 00f2 00BF     		.align	2
 742              	.L50:
 743 00f4 00000000 		.word	sen_l
 744 00f8 00000000 		.word	sen_r
 745 00fc 00000000 		.word	0
 746 0100 00000000 		.word	yawrate_tgt
 747 0104 00000000 		.word	straight_tgt
 748 0108 9A99193E 		.word	1041865114
 749 010c 9A99993E 		.word	1050253722
 750 0110 9A9999BE 		.word	-1097229926
 751              		.cfi_endproc
 752              	.LFE130:
 754              		.section	.text.Control_gyro,"ax",%progbits
 755              		.align	1
 756              		.global	Control_gyro
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 19


 757              		.syntax unified
 758              		.thumb
 759              		.thumb_func
 760              		.fpu fpv4-sp-d16
 762              	Control_gyro:
 763              	.LFB131:
 255:Src/control.c **** 
 256:Src/control.c **** /****************************************************************************************
 257:Src/control.c ****  * outline  : call 1ms (control yawrate by feadbuck)
 258:Src/control.c ****  * argument : void
 259:Src/control.c ****  * return   : void
 260:Src/control.c **** ********************************************************************************************/
 261:Src/control.c **** float Control_gyro(void)
 262:Src/control.c **** {
 764              		.loc 1 262 0
 765              		.cfi_startproc
 766              		@ args = 0, pretend = 0, frame = 0
 767              		@ frame_needed = 0, uses_anonymous_args = 0
 768 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 769              	.LCFI10:
 770              		.cfi_def_cfa_offset 24
 771              		.cfi_offset 3, -24
 772              		.cfi_offset 4, -20
 773              		.cfi_offset 5, -16
 774              		.cfi_offset 6, -12
 775              		.cfi_offset 7, -8
 776              		.cfi_offset 14, -4
 777 0002 2DED028B 		vpush.64	{d8}
 778              	.LCFI11:
 779              		.cfi_def_cfa_offset 32
 780              		.cfi_offset 80, -32
 781              		.cfi_offset 81, -28
 782              	.LVL85:
 263:Src/control.c ****     float target = 0;
 264:Src/control.c **** 
 265:Src/control.c ****     if (yawrate_tgt.dir == 0)
 783              		.loc 1 265 0
 784 0006 3E4B     		ldr	r3, .L63+8
 785 0008 93F90430 		ldrsb	r3, [r3, #4]
 786 000c 93B1     		cbz	r3, .L59
 266:Src/control.c ****     {
 267:Src/control.c ****         yawrate_tgt.velocity = 0;
 268:Src/control.c ****     }
 269:Src/control.c ****     else if (yawrate_tim.up > 0)
 787              		.loc 1 269 0
 788 000e 3D4B     		ldr	r3, .L63+12
 789 0010 1C88     		ldrh	r4, [r3]
 790 0012 002C     		cmp	r4, #0
 791 0014 34D1     		bne	.L60
 270:Src/control.c ****     {
 271:Src/control.c ****         yawrate_tgt.velocity += yawrate_tgt.accel * dt;
 272:Src/control.c ****         yawrate_tim.up--;
 273:Src/control.c ****     }
 274:Src/control.c ****     else if (yawrate_tim.cons > 0)
 792              		.loc 1 274 0
 793 0016 3B4B     		ldr	r3, .L63+12
 794 0018 5B88     		ldrh	r3, [r3, #2]
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 20


 795 001a 002B     		cmp	r3, #0
 796 001c 4BD1     		bne	.L61
 275:Src/control.c ****     {
 276:Src/control.c ****         yawrate_tim.cons--;
 277:Src/control.c ****     }
 278:Src/control.c ****     else if (yawrate_tim.down > 0)
 797              		.loc 1 278 0
 798 001e 394B     		ldr	r3, .L63+12
 799 0020 9C88     		ldrh	r4, [r3, #4]
 800 0022 002C     		cmp	r4, #0
 801 0024 4BD1     		bne	.L62
 279:Src/control.c ****     {
 280:Src/control.c ****         yawrate_tgt.velocity -= yawrate_tgt.accel * dt;
 281:Src/control.c ****         yawrate_tim.down--;
 282:Src/control.c ****     }
 283:Src/control.c ****     else
 284:Src/control.c ****     {
 285:Src/control.c ****         yawrate_tgt.velocity = 0;
 802              		.loc 1 285 0
 803 0026 364B     		ldr	r3, .L63+8
 804 0028 0022     		movs	r2, #0
 805 002a 1A80     		strh	r2, [r3]	@ movhi
 286:Src/control.c ****         flag_motion_end = TRUE;
 806              		.loc 1 286 0
 807 002c 364B     		ldr	r3, .L63+16
 808 002e 0122     		movs	r2, #1
 809 0030 1A70     		strb	r2, [r3]
 810 0032 02E0     		b	.L54
 811              	.L59:
 267:Src/control.c ****     }
 812              		.loc 1 267 0
 813 0034 324B     		ldr	r3, .L63+8
 814 0036 0022     		movs	r2, #0
 815 0038 1A80     		strh	r2, [r3]	@ movhi
 816              	.L54:
 287:Src/control.c ****     }
 288:Src/control.c **** 
 289:Src/control.c ****     target = (float)yawrate_tgt.dir * yawrate_tgt.velocity- Control_Side_Wall();
 817              		.loc 1 289 0
 818 003a 314B     		ldr	r3, .L63+8
 819 003c 93F90420 		ldrsb	r2, [r3, #4]
 820 0040 08EE102A 		vmov	s16, r2	@ int
 821 0044 F8EEC87A 		vcvt.f32.s32	s15, s16
 822 0048 B3F90030 		ldrsh	r3, [r3]
 823 004c 08EE103A 		vmov	s16, r3	@ int
 824 0050 B8EEC88A 		vcvt.f32.s32	s16, s16
 825 0054 28EE278A 		vmul.f32	s16, s16, s15
 826 0058 FFF7FEFF 		bl	Control_Side_Wall
 827              	.LVL86:
 290:Src/control.c **** 
 291:Src/control.c ****     return PID_value(target, gyro.velocity, &y_sum, &y_before, 0.98f, 18.0f, 4.5f); //2.0f, 20.0f, 
 828              		.loc 1 291 0
 829 005c B1EE022A 		vmov.f32	s4, #4.5e+0
 830 0060 F3EE021A 		vmov.f32	s3, #1.8e+1
 831 0064 9FED291A 		vldr.32	s2, .L63+20
 832 0068 2949     		ldr	r1, .L63+24
 833 006a 2A48     		ldr	r0, .L63+28
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 21


 834 006c 2A4B     		ldr	r3, .L63+32
 835 006e D3ED000A 		vldr.32	s1, [r3]
 836 0072 38EE400A 		vsub.f32	s0, s16, s0
 837              	.LVL87:
 838 0076 FFF7FEFF 		bl	PID_value
 839              	.LVL88:
 292:Src/control.c **** }
 840              		.loc 1 292 0
 841 007a BDEC028B 		vldm	sp!, {d8}
 842              	.LCFI12:
 843              		.cfi_remember_state
 844              		.cfi_restore 80
 845              		.cfi_restore 81
 846              		.cfi_def_cfa_offset 24
 847 007e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 848              	.LVL89:
 849              	.L60:
 850              	.LCFI13:
 851              		.cfi_restore_state
 271:Src/control.c ****         yawrate_tim.up--;
 852              		.loc 1 271 0
 853 0080 1F4D     		ldr	r5, .L63+8
 854 0082 B5F90200 		ldrsh	r0, [r5, #2]
 855 0086 FFF7FEFF 		bl	__aeabi_i2d
 856              	.LVL90:
 857 008a 1BA3     		adr	r3, .L63
 858 008c D3E90023 		ldrd	r2, [r3]
 859 0090 FFF7FEFF 		bl	__aeabi_dmul
 860              	.LVL91:
 861 0094 0646     		mov	r6, r0
 862 0096 0F46     		mov	r7, r1
 863 0098 B5F90000 		ldrsh	r0, [r5]
 864 009c FFF7FEFF 		bl	__aeabi_i2d
 865              	.LVL92:
 866 00a0 3246     		mov	r2, r6
 867 00a2 3B46     		mov	r3, r7
 868 00a4 FFF7FEFF 		bl	__aeabi_dadd
 869              	.LVL93:
 870 00a8 FFF7FEFF 		bl	__aeabi_d2iz
 871              	.LVL94:
 872 00ac 2880     		strh	r0, [r5]	@ movhi
 272:Src/control.c ****     }
 873              		.loc 1 272 0
 874 00ae 013C     		subs	r4, r4, #1
 875 00b0 144B     		ldr	r3, .L63+12
 876 00b2 1C80     		strh	r4, [r3]	@ movhi
 877 00b4 C1E7     		b	.L54
 878              	.L61:
 276:Src/control.c ****     }
 879              		.loc 1 276 0
 880 00b6 013B     		subs	r3, r3, #1
 881 00b8 124A     		ldr	r2, .L63+12
 882 00ba 5380     		strh	r3, [r2, #2]	@ movhi
 883 00bc BDE7     		b	.L54
 884              	.L62:
 280:Src/control.c ****         yawrate_tim.down--;
 885              		.loc 1 280 0
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 22


 886 00be 104D     		ldr	r5, .L63+8
 887 00c0 B5F90200 		ldrsh	r0, [r5, #2]
 888 00c4 FFF7FEFF 		bl	__aeabi_i2d
 889              	.LVL95:
 890 00c8 0BA3     		adr	r3, .L63
 891 00ca D3E90023 		ldrd	r2, [r3]
 892 00ce FFF7FEFF 		bl	__aeabi_dmul
 893              	.LVL96:
 894 00d2 0646     		mov	r6, r0
 895 00d4 0F46     		mov	r7, r1
 896 00d6 B5F90000 		ldrsh	r0, [r5]
 897 00da FFF7FEFF 		bl	__aeabi_i2d
 898              	.LVL97:
 899 00de 3246     		mov	r2, r6
 900 00e0 3B46     		mov	r3, r7
 901 00e2 FFF7FEFF 		bl	__aeabi_dsub
 902              	.LVL98:
 903 00e6 FFF7FEFF 		bl	__aeabi_d2iz
 904              	.LVL99:
 905 00ea 2880     		strh	r0, [r5]	@ movhi
 281:Src/control.c ****     }
 906              		.loc 1 281 0
 907 00ec 013C     		subs	r4, r4, #1
 908 00ee 054B     		ldr	r3, .L63+12
 909 00f0 9C80     		strh	r4, [r3, #4]	@ movhi
 910 00f2 A2E7     		b	.L54
 911              	.L64:
 912 00f4 AFF30080 		.align	3
 913              	.L63:
 914 00f8 FCA9F1D2 		.word	-755914244
 915 00fc 4D62503F 		.word	1062232653
 916 0100 00000000 		.word	yawrate_tgt
 917 0104 00000000 		.word	yawrate_tim
 918 0108 00000000 		.word	flag_motion_end
 919 010c 48E17A3F 		.word	1065017672
 920 0110 00000000 		.word	.LANCHOR1
 921 0114 00000000 		.word	y_sum
 922 0118 00000000 		.word	gyro
 923              		.cfi_endproc
 924              	.LFE131:
 926              		.section	.text.Control_Front_Wall,"ax",%progbits
 927              		.align	1
 928              		.global	Control_Front_Wall
 929              		.syntax unified
 930              		.thumb
 931              		.thumb_func
 932              		.fpu fpv4-sp-d16
 934              	Control_Front_Wall:
 935              	.LFB132:
 293:Src/control.c **** 
 294:Src/control.c **** float Control_Front_Wall(void)
 295:Src/control.c **** {
 936              		.loc 1 295 0
 937              		.cfi_startproc
 938              		@ args = 0, pretend = 0, frame = 0
 939              		@ frame_needed = 0, uses_anonymous_args = 0
 940              		@ link register save eliminated.
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 23


 941              	.LVL100:
 296:Src/control.c ****     float pid = 0;
 297:Src/control.c ****     if (sen_front.is_wall == TRUE)
 942              		.loc 1 297 0
 943 0000 0D4B     		ldr	r3, .L70
 944 0002 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 945 0004 012B     		cmp	r3, #1
 946 0006 02D0     		beq	.L69
 298:Src/control.c ****     {
 299:Src/control.c ****         if (sen_front.reference > sen_front.now)
 300:Src/control.c ****         {
 301:Src/control.c ****             pid = 0.2f * (sen_front.reference - sen_front.now);
 302:Src/control.c ****             //front_wall_pid=(int16_t)PID_value((float)sen_front.reference,(float)sen_front.adc,&fr
 303:Src/control.c ****         }
 304:Src/control.c ****     }
 305:Src/control.c ****     else
 306:Src/control.c ****     {
 307:Src/control.c ****         pid = 0;
 947              		.loc 1 307 0
 948 0008 9FED0C0A 		vldr.32	s0, .L70+4
 949 000c 7047     		bx	lr
 950              	.L69:
 299:Src/control.c ****         {
 951              		.loc 1 299 0
 952 000e 0A4A     		ldr	r2, .L70
 953 0010 B2F90430 		ldrsh	r3, [r2, #4]
 954 0014 B2F90020 		ldrsh	r2, [r2]
 955 0018 9342     		cmp	r3, r2
 956 001a 09DD     		ble	.L68
 301:Src/control.c ****             //front_wall_pid=(int16_t)PID_value((float)sen_front.reference,(float)sen_front.adc,&fr
 957              		.loc 1 301 0
 958 001c 9B1A     		subs	r3, r3, r2
 959 001e 00EE103A 		vmov	s0, r3	@ int
 960 0022 B8EEC00A 		vcvt.f32.s32	s0, s0
 961 0026 DFED067A 		vldr.32	s15, .L70+8
 962 002a 20EE270A 		vmul.f32	s0, s0, s15
 963              	.LVL101:
 964 002e 7047     		bx	lr
 965              	.LVL102:
 966              	.L68:
 296:Src/control.c ****     if (sen_front.is_wall == TRUE)
 967              		.loc 1 296 0
 968 0030 9FED020A 		vldr.32	s0, .L70+4
 308:Src/control.c ****     }
 309:Src/control.c ****     return pid;
 310:Src/control.c **** }
 969              		.loc 1 310 0
 970 0034 7047     		bx	lr
 971              	.L71:
 972 0036 00BF     		.align	2
 973              	.L70:
 974 0038 00000000 		.word	sen_front
 975 003c 00000000 		.word	0
 976 0040 CDCC4C3E 		.word	1045220557
 977              		.cfi_endproc
 978              	.LFE132:
 980              		.section	.text.Control_pwm,"ax",%progbits
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 24


 981              		.align	1
 982              		.global	Control_pwm
 983              		.syntax unified
 984              		.thumb
 985              		.thumb_func
 986              		.fpu fpv4-sp-d16
 988              	Control_pwm:
 989              	.LFB133:
 311:Src/control.c **** 
 312:Src/control.c **** void Control_pwm(void)
 313:Src/control.c **** {
 990              		.loc 1 313 0
 991              		.cfi_startproc
 992              		@ args = 0, pretend = 0, frame = 0
 993              		@ frame_needed = 0, uses_anonymous_args = 0
 994 0000 10B5     		push	{r4, lr}
 995              	.LCFI14:
 996              		.cfi_def_cfa_offset 8
 997              		.cfi_offset 4, -8
 998              		.cfi_offset 14, -4
 314:Src/control.c ****     if (flag_motor == TRUE)
 999              		.loc 1 314 0
 1000 0002 0F4B     		ldr	r3, .L77
 1001 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1002 0006 012B     		cmp	r3, #1
 1003 0008 04D0     		beq	.L76
 315:Src/control.c ****     {
 316:Src/control.c ****         int16_t straight_pid = 0;
 317:Src/control.c ****         int16_t yawrate_pid = 0;
 318:Src/control.c **** 
 319:Src/control.c ****         straight_pid = (int16_t)Control_encoder();
 320:Src/control.c ****         yawrate_pid = (int16_t)Control_gyro();
 321:Src/control.c **** 
 322:Src/control.c ****         Motor_pwm(straight_pid - yawrate_pid, straight_pid + yawrate_pid);
 323:Src/control.c ****     }
 324:Src/control.c ****     else
 325:Src/control.c ****     {
 326:Src/control.c ****         Motor_pwm(0, 0);
 1004              		.loc 1 326 0
 1005 000a 0021     		movs	r1, #0
 1006 000c 0846     		mov	r0, r1
 1007 000e FFF7FEFF 		bl	Motor_pwm
 1008              	.LVL103:
 1009              	.L72:
 327:Src/control.c ****     }
 328:Src/control.c **** }
 1010              		.loc 1 328 0
 1011 0012 10BD     		pop	{r4, pc}
 1012              	.L76:
 1013              	.LVL104:
 1014              	.LBB2:
 319:Src/control.c ****         yawrate_pid = (int16_t)Control_gyro();
 1015              		.loc 1 319 0
 1016 0014 FFF7FEFF 		bl	Control_encoder
 1017              	.LVL105:
 1018 0018 BDEEC00A 		vcvt.s32.f32	s0, s0
 1019 001c 10EE103A 		vmov	r3, s0	@ int
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 25


 1020 0020 1CB2     		sxth	r4, r3
 1021              	.LVL106:
 320:Src/control.c **** 
 1022              		.loc 1 320 0
 1023 0022 FFF7FEFF 		bl	Control_gyro
 1024              	.LVL107:
 1025 0026 BDEEC00A 		vcvt.s32.f32	s0, s0
 1026              	.LVL108:
 322:Src/control.c ****     }
 1027              		.loc 1 322 0
 1028 002a A1B2     		uxth	r1, r4
 1029 002c 10EE103A 		vmov	r3, s0	@ int
 1030 0030 9BB2     		uxth	r3, r3
 1031 0032 C81A     		subs	r0, r1, r3
 1032 0034 1944     		add	r1, r1, r3
 1033 0036 09B2     		sxth	r1, r1
 1034 0038 00B2     		sxth	r0, r0
 1035 003a FFF7FEFF 		bl	Motor_pwm
 1036              	.LVL109:
 1037              	.LBE2:
 1038 003e E8E7     		b	.L72
 1039              	.L78:
 1040              		.align	2
 1041              	.L77:
 1042 0040 00000000 		.word	flag_motor
 1043              		.cfi_endproc
 1044              	.LFE133:
 1046              		.section	.text.Control_EmergencyStop,"ax",%progbits
 1047              		.align	1
 1048              		.global	Control_EmergencyStop
 1049              		.syntax unified
 1050              		.thumb
 1051              		.thumb_func
 1052              		.fpu fpv4-sp-d16
 1054              	Control_EmergencyStop:
 1055              	.LFB134:
 329:Src/control.c **** 
 330:Src/control.c **** void Control_EmergencyStop(unsigned short diff_yaw)
 331:Src/control.c **** {
 1056              		.loc 1 331 0
 1057              		.cfi_startproc
 1058              		@ args = 0, pretend = 0, frame = 0
 1059              		@ frame_needed = 0, uses_anonymous_args = 0
 1060              	.LVL110:
 1061 0000 38B5     		push	{r3, r4, r5, lr}
 1062              	.LCFI15:
 1063              		.cfi_def_cfa_offset 16
 1064              		.cfi_offset 3, -16
 1065              		.cfi_offset 4, -12
 1066              		.cfi_offset 5, -8
 1067              		.cfi_offset 14, -4
 1068 0002 0546     		mov	r5, r0
 332:Src/control.c ****     int buff_yaw = yawrate_tgt.dir * yawrate_tgt.velocity - Control_Side_Wall() - gyro.velocity;
 1069              		.loc 1 332 0
 1070 0004 104A     		ldr	r2, .L83
 1071 0006 92F90440 		ldrsb	r4, [r2, #4]
 1072 000a B2F90030 		ldrsh	r3, [r2]
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 26


 1073 000e 03FB04F4 		mul	r4, r3, r4
 1074 0012 FFF7FEFF 		bl	Control_Side_Wall
 1075              	.LVL111:
 1076 0016 07EE904A 		vmov	s15, r4	@ int
 1077 001a F8EEE77A 		vcvt.f32.s32	s15, s15
 1078 001e 37EEC00A 		vsub.f32	s0, s15, s0
 1079 0022 0A4B     		ldr	r3, .L83+4
 1080 0024 D3ED007A 		vldr.32	s15, [r3]
 1081 0028 30EE670A 		vsub.f32	s0, s0, s15
 1082 002c FDEEC07A 		vcvt.s32.f32	s15, s0
 1083 0030 17EE903A 		vmov	r3, s15	@ int
 1084              	.LVL112:
 333:Src/control.c ****     //yawrate
 334:Src/control.c ****     if (buff_yaw > diff_yaw || buff_yaw < -diff_yaw)
 1085              		.loc 1 334 0
 1086 0034 9D42     		cmp	r5, r3
 1087 0036 02DB     		blt	.L80
 1088              		.loc 1 334 0 is_stmt 0 discriminator 1
 1089 0038 6D42     		negs	r5, r5
 1090 003a 9D42     		cmp	r5, r3
 1091 003c 02DD     		ble	.L79
 1092              	.L80:
 335:Src/control.c ****     {
 336:Src/control.c ****         flag_motor = FALSE;
 1093              		.loc 1 336 0 is_stmt 1
 1094 003e 044B     		ldr	r3, .L83+8
 1095              	.LVL113:
 1096 0040 0022     		movs	r2, #0
 1097 0042 1A70     		strb	r2, [r3]
 1098              	.L79:
 337:Src/control.c ****     }
 338:Src/control.c **** }...
 1099              		.loc 1 338 0
 1100 0044 38BD     		pop	{r3, r4, r5, pc}
 1101              	.L84:
 1102 0046 00BF     		.align	2
 1103              	.L83:
 1104 0048 00000000 		.word	yawrate_tgt
 1105 004c 00000000 		.word	gyro
 1106 0050 00000000 		.word	flag_motor
 1107              		.cfi_endproc
 1108              	.LFE134:
 1110              		.comm	flag_wall,1,1
 1111              		.comm	flag_motor,1,1
 1112              		.comm	flag_motion_end,1,1
 1113              		.global	front_wall_before
 1114              		.global	front_wall_sum
 1115              		.comm	si_wall_bef,4,4
 1116              		.comm	si_wall_sum,4,4
 1117              		.global	y_before
 1118              		.comm	y_sum,4,4
 1119              		.global	enc_before
 1120              		.comm	enc_sum,4,4
 1121              		.comm	yawrate_tim,6,4
 1122              		.comm	straight_tim,6,4
 1123              		.comm	yawrate_tgt,6,4
 1124              		.comm	straight_tgt,6,4
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 27


 1125              		.section	.bss.enc_before,"aw",%nobits
 1126              		.align	2
 1127              		.set	.LANCHOR0,. + 0
 1130              	enc_before:
 1131 0000 00000000 		.space	4
 1132              		.section	.bss.front_wall_before,"aw",%nobits
 1133              		.align	2
 1136              	front_wall_before:
 1137 0000 00000000 		.space	4
 1138              		.section	.bss.front_wall_sum,"aw",%nobits
 1139              		.align	2
 1142              	front_wall_sum:
 1143 0000 00000000 		.space	4
 1144              		.section	.bss.y_before,"aw",%nobits
 1145              		.align	2
 1146              		.set	.LANCHOR1,. + 0
 1149              	y_before:
 1150 0000 00000000 		.space	4
 1151              		.text
 1152              	.Letext0:
 1153              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1154              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1155              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1156              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1157              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1158              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1159              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include\
 1160              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\lib\\gcc\\arm-none-eabi
 1161              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2017-q4-major\\arm-none-eabi\\include
 1162              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1163              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1164              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 1165              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1166              		.file 15 "Inc/tim.h"
 1167              		.file 16 "Inc/filter.h"
 1168              		.file 17 "Inc/spi.h"
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 28


DEFINED SYMBOLS
                            *ABS*:00000000 control.c
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:22     .text.PID_value:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:29     .text.PID_value:00000000 PID_value
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:113    .text.PID_value:00000070 $d
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:119    .text.Straight_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:126    .text.Straight_Calc_fb:00000000 Straight_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:276    .text.Straight_Calc_fb:000000e0 $d
                            *COM*:00000006 straight_tgt
                            *COM*:00000006 straight_tim
                            *COM*:00000001 flag_motion_end
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:286    .text.Yawrate_Calc_fb:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:293    .text.Yawrate_Calc_fb:00000000 Yawrate_Calc_fb
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:444    .text.Yawrate_Calc_fb:000000e0 $d
                            *COM*:00000006 yawrate_tgt
                            *COM*:00000006 yawrate_tim
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:457    .text.Control_encoder:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:464    .text.Control_encoder:00000000 Control_encoder
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:589    .text.Control_encoder:000000d8 $d
                            *COM*:00000004 enc_sum
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:602    .text.Control_Side_Wall:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:609    .text.Control_Side_Wall:00000000 Control_Side_Wall
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:743    .text.Control_Side_Wall:000000f4 $d
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:755    .text.Control_gyro:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:762    .text.Control_gyro:00000000 Control_gyro
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:914    .text.Control_gyro:000000f8 $d
                            *COM*:00000004 y_sum
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:927    .text.Control_Front_Wall:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:934    .text.Control_Front_Wall:00000000 Control_Front_Wall
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:974    .text.Control_Front_Wall:00000038 $d
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:981    .text.Control_pwm:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:988    .text.Control_pwm:00000000 Control_pwm
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1042   .text.Control_pwm:00000040 $d
                            *COM*:00000001 flag_motor
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1047   .text.Control_EmergencyStop:00000000 $t
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1054   .text.Control_EmergencyStop:00000000 Control_EmergencyStop
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1104   .text.Control_EmergencyStop:00000048 $d
                            *COM*:00000001 flag_wall
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1136   .bss.front_wall_before:00000000 front_wall_before
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1142   .bss.front_wall_sum:00000000 front_wall_sum
                            *COM*:00000004 si_wall_bef
                            *COM*:00000004 si_wall_sum
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1149   .bss.y_before:00000000 y_before
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1130   .bss.enc_before:00000000 enc_before
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1126   .bss.enc_before:00000000 $d
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1133   .bss.front_wall_before:00000000 $d
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1139   .bss.front_wall_sum:00000000 $d
C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s:1145   .bss.y_before:00000000 $d

UNDEFINED SYMBOLS
__aeabi_f2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
__aeabi_i2d
__aeabi_d2iz
__aeabi_dsub
ARM GAS  C:\Users\kotaro\AppData\Local\Temp\ccdDJ87z.s 			page 29


enc
sen_l
sen_r
gyro
sen_front
Motor_pwm
